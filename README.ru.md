# Pero

Графопостроитель (перо), позволяющий рисовать графики последовательно по точкам. 
Использует библиотеку matplotlib.
Также включает в себя класс Turtle (см. далее).

[English version](README.md)


# Зависимости

- Python 3.6.x
- numpy
- matplotlib


# Установка
Все команды выполняются в командной строке.

**Вариант первый.** Клонируем репозиторий и переходим в созданную директорию 

```commandline
git clone https://github.com/Sherevv/pero.git pero

cd pero
```

и выполняем команду:
```
python setup.py install
```
или
```
pip install .
```

**Второй вариант.** Установка с помощью pip из удаленного репозитория:

```
pip install git+https://github.com/Sherevv/pero.git
```

# Описание класса Pero

СИНТАКСИС:

    obj = Pero( x, y )
    obj = Pero( p1,...,pn ) 
    
`x, y` - координаты начального положения пера = скаляры float

ИЛИ 
 
`p1, ..., pn` - объекты класса Pero


-------------------------------------------------------------------------

Обект Pero имеет внутренний буфер. 
При размере буфера (числе вмещаемых в него точек) равном 1,
перемещения пера (с помощью методов punct, vector) автоматически приводят 
к построению графика. При этом операции с буфером при помощи методов 
draw и transform не доступны ( попытка их выполнения приводит к ошибке ).

При размере буфера, большем 1, при перемещениях пера (с помощью 
методов punct, vector) новые точки графика временно накапливаются
в нем, но не отображаются в координатных осях.
Для построеия графика в этом случае необходимо применять метод draw
(после этого в буфере сохраняется только последняя точка).

Также, если размер буфера больше 1, то при переполнении буфера, его размер 
автоматически увеличивается ( на величину первоначального
размера буфера ). 

Изменить размер буфера можно с помощью метода set.

## Методы класса Pero
**punct()** - "перемещает" перо в точку с заданными координатами

    obj.punct( x, y )

**vector()** - "перемещает" перо на заданный вектор от последней точки строящейся линии к новой 
    
    obj.vector( dx, dy )
    
**set(params)** - устанавливает значения свойств объекта класса Pero

    obj.set( 'lineColor' , color )    # установка цвета линии   
    obj.set( 'patchColor', color )    # установка цвета заливки
    obj.set( 'lineStyle' , style )    # установка стиля линии                
    obj.set( 'lineWidth' , width )    # установка толщины линии 
    obj.set( 'marker'    , marker )   # установка типа маркера
    obj.set( 'markerSize' , size )    # установка размера маркера   
    obj.set( 'bufsize'   , bufSize )  # установка размера буфера                        
    obj.set( 'delay'     , delay )    # установка величины искуственной задержки

также любой набор свойств из этого числа можно устанавливать одновременно:    
    
    obj.set( 'lineColor', color,..., 'delay', delay ) 
    
(пары "свойство-значение" могут следовать в любом порядке)        

Параметры:
`color` - цвет = `'b' | 'r' | 'g' | 'y' | 'k' | 'w' | 'm' | вектор из 3-х чисел`  
(изначально цвет устанавливается равным `'b'`)  и другие допустимые [варианты](https://matplotlib.org/api/colors_api.html)

`style` - стиль линии = `'solid', 'dashed', 'dashdot', 'dotted', '-', '--', '-.', ':', 'None', ' ', ''` 
(изначально стиль линии устанавливается равным `'-'`)

`width` - толщина линии
(изначально толщина линии устанавливается равной `0.5`)

`marker` - вид маркеров = `'.', ',', 'o', 'v', '^', '<', '>', '1', '2', '3', '4', '8',
'*', '+', '|', '_', 's', 'h', 'H', 'D', 'd', 'p', 'P', 'x', 'X', 'None', ' ', ''`
( изначально установлено значение `'None'` )

`size` - размер маркеров = скаляр float ( изначально установлено значение `6`)

`bufSize` - размер буфера (по умолчанию `200`)   
                     
`delay` - длительность искуственной задержки а сек. = скаляр float
( изначально установлено значение `0` )

**draw()** - строит линию или закрашивает участок (или их семейство), 
координаты точек которой содержатся во внутреннем буфере

    obj.draw()
    obj.draw( type )            
    h = obj.draw()   
    h = obj.draw( type )           
    obj.draw( type, dx, dy )            
    h = obj.draw( type, dx, dy )

`type` = `'line' | 'patch'`  (по умолчанию type = `'line'`)

`dx, dy` - координаты вектора смещения пера (по умолчанию dx = dy = `0`)

`h` - объект построенной линии

**flip()** - переворачивает задом наперёд содержимое внутреннего буфера объекта
    
    obj2  = obj1.flip()

**transform(f, args)** - выполняет преобразование координат точек, нахоящихся в буфере, по заданному закону

    obj.transform( f )
    obj.transform( f, p1,...,pn )

`f` - ссылка на функцию, осушествляющую преобразование координатной плоскости и имеющую вид:

    x2, y2 = F( x1, y1 ) 

**print()** - отображает объект класса Pero в командном окне

    obj.print() # отображает объект класса Pero в командном окне
    obj.print( 'prime' )  # отображает только основную информацию    


# Описание класса Turtle

Класс "Черепаха" является оберткой над классом Pero.
Имеет два своих свойства (в дополнение к свойствам пера): шаг и угол поворота.
Шаг `step` задается комплексным числом, метод `forward()` перемещает черепаху по вектору `(Re(step), Im(step))`.


    obj = Turtle( x, y )
            
`x, y` - координаты начального положения черепахи, вещественные числа 

## Методы класса Turtle

**forward()** - перемещает черепаху вдоль установленного направления на установленный шаг
 
    obj.forward()
    
**rot(side)** разворачивает черепаху на фиксированный угол в заданном направлении

    obj.rot( side )
    
`side` - направление поворота, влево = `'L' | 'LEFT'` или вправо = `'R' | 'RIGHT'` (регист значения не имеет)

**set(params)** - устанавливает значения свойств объекта класса Turtle аналогично методу `set` класса Pero

    obj.set( 'angle'     , angle )    # установка абсолютной величины угла поворота черепахи           
    obj.set( 'step'      , step )     # установка величины шага черепахи            
    obj.set( 'lineColor' , color )    # установка цвета линии   
    ...
        
`angle` - абсолютная величина угла поворота черепахи в радианах ( изначально установлен угол `pi/2` )

`step`  - величина шага черепахи, комплексное число ( изначально установлен шаг `1+i` ) 

Методы **draw()**, **transform()**, **print()** - соответствуют методам класса Pero


# Пример использования

Создайте python скрипт, например `start.py`
```python
from pero import Pero, Turtle

p = Pero(0, 1)  # Создаем перо с начальными координатами (0,1)
p.punct(1, 1)   # Перемещаем перо в точку (1,1)
p.punct(0, 1)   # Перемещаем перо в точку (0,1)
p.draw()        # Отрисовываем ломаную из точек
p.set('linecolor', 'r', 'lineWidth', 2)  # Устанавливаем красный цвет линии и толщину 2
p.vector(1, 2)  # Смещаем перо в точку на 1 по x и на 2 по y
p.draw()        # Отрисовываем ломаную из точек
# необходимо вызывать метод draw перед каждым (или после) изменением параметров 
# с помощью функции set (например, цвета линии)

t = Turtle(-1, 2.3)    # Создаем черепаху с начальными координатами (-1, 2.3)
t.set('angle', 2.5)    # Задаем угол поворота в радианах
t.set('step', 1 - 1j)  # Задаем шаг вектору (1, -1)
t.print()              # Выводим информацию о черепахе

for i in range(20):
    t.rot('l')   # Поворачиваем влево на 90 градусов
    t.forward()  # Перемещаем черепаху по заданному направлению
    
t.draw()  # Отрисовываем ломаную из точек

input()  # для предотвращения закрытия окна после отрисовки
```

затем вызываете исполнение скрипта в командной строке
```commandline
python start.py
```


# Использование интерактивной консоли python
Подготовьте python файл с функцией (например, файл `myfunc.py`):
```python
def draw_cube(p):
    """ 
    Рисует зеленый квадрат со стороной 1, 
    затем устанавливает синий цвет линии
    """
    p.set('linecolor', 'g')
    p.vector(0, 1)
    p.vector(1, 0)
    p.vector(0, -1)
    p.vector(-1, 0)
    p.draw()
    p.set('linecolor', 'b')    
```

затем запускаем консоль python
```commandline
python
```
и выполняем следующие команды

```
>>> from pero import Pero
>>> from myfunc import draw_cube
>>> p = Pero(1, 1)
>>> draw_cube(p)
```


[Примеры кода](pero/examples)